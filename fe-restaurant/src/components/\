import styled from 'styled-components';

const StyledItem = styled.div`
  display: flex;
  margin-bottom: 8px;
`;

const Info = ({value}) => {
  const StyledInfo = styled.div`
    margin-right: 8px;
  `;
  return (
    <StyledInfo>{value}</StyledInfo>
  )
}

export const Item = ({item, orderItems, addOrderItems}) => {
  const { name, price, type } = item;
  const handleInputChange = (event) => {
    const items = [...orderItems];
    const orderedItem = orderItems.find(element => element.id === item.id) || item;
    const orderedItemIndex = orderItems.findIndex(element => element.id === item.id) || orderItems[orderItems.length];
    orderedItem.quantity = event.target.value;
    if (orderedItemIndex === -1) {
      items.push(orderedItem)
    }
    console.log("orderedItem", typeof event.target.value);
    items[orderedItemIndex] = item;
    addOrderItems(items);
  }

  return (
    <StyledItem key={item.id}>
      <Info value={name} />
      <Info value={`Â£${price}`} />
      <Info value={type} />
      <input
        type="number"
        id="quantity"
        name="quantity"
        onKeyPress={(event) => {
          if (!/[0-9]/.test(event.key)) {
            handleInputChange(event)
            event.preventDefault();
          }
        }}
      />
    </StyledItem>
  );
}
